<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONUADɔ Membership and Beneficiary Form</title>
    <style>
        /* --- General Styles --- */
        body {
            background-color: #f3cc5f;
            font-family: 'Times New Roman', Times, serif;
            margin: 0;
            padding: 0px 5px 5px 10px;
            color: #000;
        }

        .form-container {
            max-width: 800px;
            margin: 12px auto;
            padding: 20px;
            background-color: #f3cc5f; /* Same as body to match the original document */
        }

        /* --- Header and Logo --- */
        .logo-container {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo {
            max-width: 100px;
            height: auto;
        }

        .form-title {
            text-align: center;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: bold;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        /* --- Form Sections --- */
        .form-section {
            margin-bottom: 10px;
        }

        .section-title {
            font-family: Arial, Helvetica, sans-serif;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 12px;
            border-bottom: 1px solid #555;
            padding-bottom: 5px;
        }
        
        /* --- Form Grid Layout --- */
        .form-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 10px;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        /* --- Labels and Inputs --- */
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            font-weight: bold;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #000;
            background-color: #fff;
            font-size: 1em;
            font-family: 'Times New Roman', Times, serif;
        }

        textarea {
            height: 100px;
            resize: vertical;
        }
        
        /* --- Beneficiary Specifics --- */
        .beneficiary-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 15px 0;
            border-bottom: 1px dashed #555;
        }
        .beneficiary-item:last-child {
            border-bottom: none;
        }
        
        .beneficiary-number {
            font-weight: bold;
            font-size: 1.1em;
            padding-top: 25px; /* Align with input boxes */
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;      /* <-- allow wrapping */
            gap: 10px;
            align-items: center;
            padding-top: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        /* --- Submit Button --- */
        .submit-container {
            text-align: center;
            margin-top: 20px;
        }

        .submit-btn {
            background-color: #4a6da7;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #3b5786;
        }
    </style>
    <!-- 1) html2canvas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<!-- 2) jsPDF UMD bundle -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>

    <div class="form-container" id="formContent">
        <!-- FORM SUBMISSION SETUP -->
        <form id="membershipForm" action="https://formspree.io/f/xvgrdrwj" method="POST">

            <div class="logo-container">
                <!-- Embedded Logo Image -->
                <img src="https://i.ibb.co/yFCt7RVh/img15.jpg" alt="We Are One Logo" class="logo">
            </div>

            <h1 class="form-title">ONUADɔ MEMBERSHIP AND BENEFICIARY FORM</h1>

            <!-- Member Information Section -->
            <div class="form-section">
                <h2 class="section-title">MEMBER INFORMATION</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="member_first_name">FIRST NAME:</label>
                        <input type="text" id="member_first_name" name="Member First Name" required>
                    </div>
                    <div class="form-group">
                        <label for="member_last_name">LAST NAME:</label>
                        <input type="text" id="member_last_name" name="Member Last Name" required>
                    </div>
                    <div class="form-group">
                        <label for="member_other_names">OTHER NAMES:</label>
                        <input type="text" id="member_other_names" name="Member Other Names">
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="dob_day"><u>DATE OF BIRTH</u> <br>DAY:</br></label>
                        <input type="text" id="dob_day" name="Date of Birth - Day">
                    </div>
                    <div class="form-group">
                        <label for="dob_month">MONTH:</label>
                        <input type="text" id="dob_month" name="Date of Birth - Month">
                    </div>
                </div>
            </div>

            <!-- Contact Information Section -->
            <div class="form-section">
                <h2 class="section-title">CONTACT INFORMATION</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="phone">PHONE NO.</label>
                        <input type="text" id="phone" name="Phone Number" required>
                    </div>
                    <div class="form-group" style="flex: 2;">
                        <label for="address">ADDRESS:</label>
                        <textarea id="address" name="Address"></textarea>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="country">COUNTRY:</label>
                        <input type="text" id="country" name="Country">
                    </div>
                    <div class="form-group">
                        <label for="town">TOWN:</label>
                        <input type="text" id="town" name="Town">
                    </div>
                </div>
            </div>

            <!-- Next of Kin Section -->
            <div class="form-section">
                <h2 class="section-title">NEXT OF KIN</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="nok_first_name">FIRST NAME:</label>
                        <input type="text" id="nok_first_name" name="Next of Kin - First Name">
                    </div>
                    <div class="form-group">
                        <label for="nok_last_name">LAST NAME:</label>
                        <input type="text" id="nok_last_name" name="Next of Kin - Last Name">
                    </div>
                    <div class="form-group">
                        <label for="nok_other_names">OTHER NAMES:</label>
                        <input type="text" id="nok_other_names" name="Next of Kin - Other Names">
                    </div>
                </div>
            </div>

            <!-- Beneficiaries Section -->
            <div class="form-section">
                <h2 class="section-title">BENEFICIARIES</h2>
                
                <div class="beneficiary-item">
                    <span class="beneficiary-number">1.</span>
                    <div class="form-group">
                        <label for="b1_first_name">FIRST NAME:</label>
                        <input type="text" id="b1_first_name" name="Beneficiary 1 - First Name">
                    </div>
                    <div class="form-group">
                        <label for="b1_last_name">LAST NAME:</label>
                        <input type="text" id="b1_last_name" name="Beneficiary 1 - Last Name">
                    </div>
                    <div class="form-group checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_father" name="Beneficiary 1 - Relationship" value="Father">
                            <label for="b1_father">FATHER</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_mother" name="Beneficiary 1 - Relationship" value="Mother">
                            <label for="b1_mother">MOTHER</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_uncle" name="Beneficiary 1 - Relationship" value="Uncle">
                            <label for="b1_uncle">UNCLE</label>
                        </div>
                    </div>
                </div>

                <div class="beneficiary-item">
                    <span class="beneficiary-number">2.</span>
                    <div class="form-group">
                        <label for="b2_first_name">FIRST NAME:</label>
                        <input type="text" id="b2_first_name" name="Beneficiary 2 - First Name">
                    </div>
                    <div class="form-group">
                        <label for="b2_last_name">LAST NAME:</label>
                        <input type="text" id="b2_last_name" name="Beneficiary 2 - Last Name">
                    </div>
                    <div class="form-group checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="b2_father" name="Beneficiary 2 - Relationship" value="Father">
                            <label for="b2_father">FATHER</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b2_mother" name="Beneficiary 2 - Relationship" value="Mother">
                            <label for="b2_mother">MOTHER</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b2_aunty" name="Beneficiary 2 - Relationship" value="Aunty">
                            <label for="b2_aunty">AUNTY</label>
                        </div>
                    </div>
                </div>

                <div class="beneficiary-item">
                    <span class="beneficiary-number">3.</span>
                    <div class="form-group">
                        <label for="b3_first_name">FIRST NAME:</label>
                        <input type="text" id="b3_first_name" name="Beneficiary 3 - First Name">
                    </div>
                    <div class="form-group">
                        <label for="b3_last_name">LAST NAME:</label>
                        <input type="text" id="b3_last_name" name="Beneficiary 3 - Last Name">
                    </div>
                    <div class="form-group">
                        <label for="b3_event">MARRIAGE/ANNIVERSARY</label>
                        <input type="text" id="b3_event" name="Beneficiary 3 - Event">
                    </div>
                </div>

                <div class="beneficiary-item">
                    <span class="beneficiary-number">4.</span>
                    <div class="form-group">
                        <label for="b4_first_name">FIRST NAME:</label>
                        <input type="text" id="b4_first_name" name="Beneficiary 4 - First Name">
                    </div>
                    <div class="form-group">
                        <label for="b4_last_name">LAST NAME:</label>
                        <input type="text" id="b4_last_name" name="Beneficiary 4 - Last Name">
                    </div>
                    <div class="form-group">
                        <label for="b4_event">EVENT/CEREMONY</label>
                        <input type="text" id="b4_event" name="Beneficiary 4 - Event">
                    </div>
                </div>

            </div>

            <div class="submit-container">
                <button type="submit" class="submit-btn">Submit Form</button>
            </div>

        </form>
    </div>

    <!-- WhatsApp Redirect Script -->

<script>
window.addEventListener('load', () => {
  const { jsPDF } = window.jspdf;
  const form = document.getElementById('membershipForm');
  const container = document.getElementById('formContent');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    const response = await fetch(form.action, {
      method: 'POST',
      body: formData,
      headers: { 'Accept': 'application/json' }
    });

    if (!response.ok) {
      alert('Form submission failed. Try again.');
      return;
    }

    // Temporarily scale down the container to squeeze into 1 page
    container.style.transform = 'scale(0.8)';
    container.style.transformOrigin = 'top left';

    const canvas = await html2canvas(container, {
      scale: 2,
      useCORS: true,
      scrollY: -window.scrollY
    });

    // Reset the scaling after snapshot
    container.style.transform = '';
    container.style.transformOrigin = '';

    const imgData = canvas.toDataURL('image/png', 1.0);
    const pdf = new jsPDF({ unit: 'mm', format: 'a4', orientation: 'portrait' });
    const pageWidth = pdf.internal.pageSize.getWidth();
    const pageHeight = pdf.internal.pageSize.getHeight();

    pdf.addImage(imgData, 'PNG', 0, 0, pageWidth, pageHeight);
    const filename = `ONUAD_Membership_${data['Member First Name']}_${data['Member Last Name']}.pdf`;
    pdf.save(filename);

    // WhatsApp share
    const message =
      `Hello ${data['Member First Name']} ${data['Member Last Name']},%0A%0A` +
      `Your form has been submitted successfully. Please check your Downloads for the PDF file.`;
    const phone = '233550782685';
    window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
  });
});
</script>

</body>
</html>
